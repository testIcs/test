<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zxkj.dao.UserMapper">

	<!-- 用户登录 -->
	<select id="login" parameterType="String" resultType="user">
		select id userId,
			user_name userName,
			id_number realName,
			password password,
			phone_no phone 
		from tbl_user_info 
		where user_name = #{userName}
	</select>
	
	<!-- 判断账号是否存在 -->
	<select id="judgeAccount" parameterType="user" resultType="Integer">
		select count(1)
		from tbl_user_info 
		where user_name = #{userName}
	</select>
	
	<!-- 用户注册 -->
	<insert id="addUser" parameterType="user">
		<selectKey keyProperty="id" order="AFTER" resultType="Integer">
	      	SELECT LAST_INSERT_ID()
		</selectKey>
		INSERT INTO tbl_user_info(
			user_name,
			password,
			phone_no,
			id_number,
			descrip
		)
		VALUES
		(
			#{userName},
			#{password},
			#{phoneNo},
			#{idNumber},
			#{descrip}
		)
	</insert>
</mapper>